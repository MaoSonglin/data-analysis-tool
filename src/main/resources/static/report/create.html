<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>新建报表</title>
		<link rel="stylesheet" type="text/css" href="../static/plugins/layui/css/layui.css"/>
		<link rel="stylesheet" type="text/css" href="create.css"/>
		<link rel="stylesheet" type="text/css" href="../static/plugins/zTree/css/zTreeStyle/zTreeStyle.css"/>
	</head>
	<body>
		<div class="wrapper flex-column" id="app">
			<div class="header">
				<span class="layui-breadcrumb">
					<a href="javascript:;">当前位置：</a>
					<a href="list.html">报表管理</a>
					<a href="javascript:;">编辑报表&emsp;&emsp;{{report.name}}</a>
					<!-- <a href="javascript:;">数据表</a> -->
				</span>
			</div>
			<div class="body flex-grow flex-row">
				<div class="left">
					<div class="char-list">
						<ul>
							<li v-for="(image,index) in dragList">
								<img :src="image.src" width="60px" draggable="true" @dragstart="drag(index,$event)">
								<span v-html="image.name"></span>
							</li>
						</ul>
					</div>
				</div>
				<div class="right flex-grow">
					<div class="content" @drop="drop($event)" @dragover="allowDrop($event)">
						<template v-for="(pic,index) in pictures">
							<div class="report" :style="getStyle(pic)" onmousedown="capture(event)" onmouseover="mouseenter(event)" :data-index = "index" >
								<div class="report-content" >
									<div id="" class="report-toolbar">
										<i class="layui-icon layui-icon-delete float-right" @click="rmGraph(pic,$event)"></i>
										<i class="layui-icon layui-icon-set-sm float-right" @click="setting(pic,$event)"></i>
										<i class="layui-icon layui-icon-reply-fill float-right"></i>
									</div>
									<div class="report-body" :id="'graph-'+index">
										<div class="">
											xhong
										</div>
									</div>
								</div>
							</div>
						</template>
					</div>
				</div>
			</div>
		</div>
		
		<!-- 编辑图形 -->
		<div id="dialog" style="display: none;">
			<div class="layui-form">
				<div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label">报表名称</label>
						<div class="layui-input-inline">
							<input type="text" class="layui-input" name="name" id="name" v-model="graph.title" />
						</div>
						<label class="layui-form-label">报表类型</label>
						<div class="layui-input-inline">
							<select class="layui-select" v-model="graph.type">
								<option value="bar">条形图</option>
								<option value="line">折线图</option>
								<option value="pie">饼状图</option>
							</select>
						</div>
					</div>
					<!-- <button type="button" class="layui-btn" style="float: right;">保存</button> -->
				</div>
			</div>
			<div class="layui-row layui-col-space15 dialog-content">
				<div class="layui-col-md2 layui-col-sm4" id="ztree">
					<tree v-bind:asyn="true" v-bind:nodes="nodes" 
						v-on:loadchildren="loadChildren($event)"
						v-on:nodeclick="select($event)"
						v-on:nodedragstart="startDrag($event)" ></tree>
				</div>
				<div class="layui-col-md5 layui-col-sm4">
					
					<div class="layui-card">
						<div class="layui-card-header">
							<h3 class="">分类(x轴)</h3>
						</div>
						<div class="layui-card-body">
							<div style="height: 300px;" @drop="addAxis($event)" ondragover="allowDrop(event)">
								<table class="layui-table fix-table layui-box" lay-size="sm">
									<colgroup>
										<col width="120">
										<col width="120">
										<col width="100"/>
										<col>
									</colgroup>
									<tr><th>编号</th><th>名称</th><th>类型</th><th>操作</th></tr>
									<tr v-for="(field,index) in graph.columns" :id="'tr-'+field.id" :data-id = "field.id">
										<td v-html="field.id">Data</td>
										<td v-html="field.chinese?field.chinese:field.name"></td>
										<td v-html="field.typeName"></td>
										<td><i class="layui-icon layui-icon-delete" @click="rmAxis(field,$event)"></i></td>
									</tr>
									<tr>
										<td colspan="4" align="center">拖动左侧字段到此处</td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>
				<div class="layui-col-md5 layui-col-sm4">
					<div class="layui-card">
						<div class="layui-card-header">
							<h3 class=""></h3>
						</div>
						<div class="layui-card-body">
							
						</div>
					</div>
				</div>
				<div class="layui-col-sm10 layui-col-sm-offset1">
					<div class="layui-card">
						<div class="layui-header">
							<h3>数据预览</h3>
						</div>
						<div class="layui-body">
							<div class="" style="overflow-x: auto;width: 100%;">
								<table class="layui-table" border="" cellspacing="" cellpadding="" lay-size="sm">
									<tr></tr>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		
		<script src="../static/plugins/jquery/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../static/plugins/layui/layui.all.js" type="text/javascript" charset="utf-8"></script>
		<script src="../static/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../res/js/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../res/js/vue-resource.js" type="text/javascript" charset="utf-8"></script>
		<script src="../res/js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../res/js/my-global.js" type="text/javascript" charset="utf-8"></script>
		<script src="../res/js/graphdrawer.js" type="text/javascript" charset="utf-8"></script>
		<script src="../static/plugins/zTree/api/apiCss/jquery.ztree.core.js" type="text/javascript" charset="utf-8"></script>
		<script src="../res/js/graphdrawer.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="create.js"></script>
	</body>
</html>
<!-- 
select 
	generatedAlias0 
from 
	dat.domain.TableColumn as generatedAlias0, 
	dat.domain.VirtualColumn as generatedAlias1 
inner join 
	generatedAlias1.refColumns as generatedAlias2 
where 
	generatedAlias0.id in (generatedAlias2.id=:param0) 
    select
        tablecolum0_.id as id1_8_,
        tablecolum0_.add_time as add_time2_8_,
        tablecolum0_.buffer_length as buffer_l3_8_,
        tablecolum0_.char_octet_length as char_oct4_8_,
        tablecolum0_.chinese as chinese5_8_,
        tablecolum0_.column_def as column_d6_8_,
        tablecolum0_.column_name as column_n7_8_,
        tablecolum0_.column_size as column_s8_8_,
        tablecolum0_.data_table_id as data_ta22_8_,
        tablecolum0_.data_type as data_typ9_8_,
        tablecolum0_.decimal_digits as decimal10_8_,
        tablecolum0_.is_foregin_key as is_fore11_8_,
        tablecolum0_.is_primary_key as is_prim12_8_,
        tablecolum0_.is_unique as is_uniq13_8_,
        tablecolum0_.nullable as nullabl14_8_,
        tablecolum0_.num_prec_radix as num_pre15_8_,
        tablecolum0_.ordinal_position as ordinal16_8_,
        tablecolum0_.remarks as remarks17_8_,
        tablecolum0_.sql_data_type as sql_dat18_8_,
        tablecolum0_.sql_datetime_sub as sql_dat19_8_,
        tablecolum0_.state as state20_8_,
        tablecolum0_.type_name as type_na21_8_ 
    from
        table_column tablecolum0_ cross 
    join
        virtual_column virtualcol1_ 
    where
        virtualcol1_.id in (
            ?
        )
 -->