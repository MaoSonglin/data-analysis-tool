<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>新建报表</title>
		<link rel="stylesheet" type="text/css" href="../static/plugins/layui/css/layui.css"/>
		<link rel="stylesheet" type="text/css" href="create.css"/>
	</head>
	<body>
		<div class="wrapper flex-column" id="app">
			<div class="header">
				<span class="layui-breadcrumb">
					<a href="javascript:;">当前位置：</a>
					<a href="list.html">报表管理</a>
					<a href="javascript:;">编辑报表&emsp;&emsp;{{report.name}}</a>
					<!-- <a href="javascript:;">数据表</a> -->
				</span>
			</div>
			<div class="body flex-grow flex-row">
				<div class="left">
					<div class="char-list">
						<ul>
							<li v-for="(image,index) in dragList">
								<img :src="image.src" width="60px" draggable="true" @dragstart="drag(index,$event)">
								<span v-html="image.name"></span>
							</li>
						</ul>
					</div>
				</div>
				<div class="right flex-grow">
					<div class="content" @drop="drop($event)" @dragover="allowDrop($event)">
						<template v-for="(pic,index) in pictures">
							<div class="report" :style="getStyle(pic)" onmousedown="capture(event)" onmouseup="release(event)" onmouseover="mouseenter(event)" :data-index = "index" >
								<div class="report-content" >
									<div id="" class="report-toolbar">
										<i class="layui-icon layui-icon-delete float-right" @click="rmGraph(pic,$event)"></i>
										<i class="layui-icon layui-icon-set-sm float-right" @click="setting(pic,$event)"></i>
									</div>
									<div class="report-body" :id="'graph-'+index">
										<div class="">
											xhong
										</div>
									</div>
								</div>
							</div>
						</template>
					</div>
				</div>
			</div>
		</div>
		
		<!-- 编辑图形 -->
		<div id="dialog" style="display: none;">
			<div class="layui-row layui-col-space15 dialog-content">
				<div class="layui-col-md2 layui-col-sm4">
					<tree v-bind:asyn="true" v-bind:nodes="nodes" 
						v-on:loadchildren="loadChildren($event)"
						v-on:nodeclick="select($event)"
						v-on:nodedragstart="startDrag($event)" ></tree>
				</div>
				<div class="layui-col-md5 layui-col-sm4">
					<div class="layui-card">
						<div class="layui-card-header">
							<h3 class="">分类(x轴)</h3>
						</div>
						<div class="layui-card-body">
							<div style="height: 300px;" @drop="addAxis('xAxis',$event)" ondragover="allowDrop(event)">
								<table class="layui-table fix-table layui-box">
									<colgroup>
										<col width="120">
										<col width="200">
										<col width="120"/>
										<col>
									</colgroup>
									<tr><th>编号</th><th>名称</th><th>类型</th><th>操作</th></tr>
									<tr v-for="(field,index) in graph.xAxis" :id="'tr-'+field.id" :data-id = "field.id">
										<td v-html="field.id">Data</td>
										<td v-html="field.chinese?field.chinese:field.name"></td>
										<td v-html="field.typeName"></td>
										<td><i class="layui-icon layui-icon-delete" @click="rmAxis('xAxis',field,$event)"></i></td>
									</tr>
									<tr>
										<td colspan="4" align="center">拖动左侧字段到此处</td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>
				<div class="layui-col-md5 layui-col-sm4">
					<div class="layui-card">
						<div class="layui-card-header">
							<h3 class="">取值(y轴)</h3>
						</div>
						<div class="layui-card-body">
							<div style="height: 300px;" @drop="addAxis('yAxis',$event)" ondragover="allowDrop(event)">
								<table class="layui-table fix-table layui-box">
									<colgroup>
										<col width="120">
										<col width="200">
										<col width="120"/>
										<col>
									</colgroup>
									<tr><th>编号</th><th>名称</th><th>类型</th><th>操作</th></tr>
									<tr v-for="(field,index) in graph.yAxis" :id="'tr-'+field.id" :data-id = "field.id">
										<td v-html="field.id">Data</td>
										<td v-html="field.chinese?field.chinese:field.name"></td>
										<td v-html="field.typeName"></td>
										<td><i class="layui-icon layui-icon-delete" @click="rmAxis('yAxis',field,$event)"></i></td>
									</tr>
									<tr>
										<td colspan="4" align="center">拖动左侧字段到此处</td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		
		<script src="../static/plugins/jquery/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../static/plugins/layui/layui.all.js" type="text/javascript" charset="utf-8"></script>
		<script src="../static/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../res/js/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../res/js/vue-resource.js" type="text/javascript" charset="utf-8"></script>
		<script src="../res/js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../res/js/my-global.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="create.js"></script>
	</body>
</html>
